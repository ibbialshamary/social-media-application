(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2183db"],{c9c2:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mainPostContainer"},[e._m(0),s("div",{staticClass:"createPostForm"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.publishPost(e.user._id)}}},[s("label",[e._v("Post File")]),s("input",{attrs:{type:"file",id:"postImage",required:"",accept:"image/*"},on:{change:e.uploadImage}}),s("label",{staticClass:"customFileUpload",attrs:{id:"customFileUpload",for:"postImage"}},[e._v(e._s(e.uploadProgress))]),s("label",{attrs:{for:"postName"}},[e._v("Post Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",id:"postName",required:"",minlength:"6"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("label",{attrs:{for:"postDescription"}},[e._v("Post Description")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{type:"text",id:"postDescription",required:"",minlength:"6"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),s("label",{attrs:{for:"postPrivacy"}},[e._v("Post Privacy")]),s("br"),s("select",{directives:[{name:"model",rawName:"v-model",value:e.privacy,expression:"privacy"}],attrs:{id:"postPrivacy",required:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.privacy=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"public"}},[e._v("Public")]),s("option",{attrs:{value:"private"}},[e._v("Private")])]),s("br"),s("br"),e._m(1),s("div",{attrs:{id:"errorMessage"}}),s("div",{attrs:{id:"successMessage"}})])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"headingClass"},[s("h1",[e._v("Create and publish posts here")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"buttonContainer"},[s("input",{staticClass:"button",attrs:{type:"submit",value:"Publish Post"}}),s("br"),s("br")])}],o=(s("a4d3"),s("e01a"),s("99af"),s("b0c0"),s("ac1f"),s("8a79"),s("5319"),s("5530")),n=s("2f62"),i=s("dc59"),c={data:function(){return{name:"",description:"",image:"",privacy:"",uploadProgress:""}},computed:Object(o["a"])(Object(o["a"])({},Object(n["c"])({storePostError:"postError",storePostStatus:"postStatus",gettersUser:"user"})),{},{postError:{get:function(){return this.storePostError},set:function(e){return e}},postStatus:{get:function(){return this.storePostStatus},set:function(e){return e}},user:{get:function(){return this.gettersUser},set:function(e){return e}}}),methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])(["post"])),{},{uploadImage:function(e){var t=this,s=new Date,a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),r=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),o=a+r,n=e.target.files[0];if(!(n.name.endsWith("jpeg")||n.name.endsWith("png")||n.name.endsWith("jpg")))return console.log("Please choose an appropriate format"),document.getElementById("customFileUpload").classList.add("fileUploadError"),void(this.uploadProgress=" failed");var c=i["a"].storage().ref("images/".concat(this.user.username,"-").concat(o,"-").concat(n.name)),u=c.put(n);u.on("state_changed",(function(e){}),(function(e){}),(function(){u.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e);var s=document.getElementById("customFileUpload");s.classList.add("noBefore"),s.classList.add("fileUploaded"),t.uploadProgress="File Upload Complete",t.image=e}))}))},publishPost:function(e){var t=this,s={name:this.name,description:this.description,privacy:this.privacy,image:this.image};this.post([s,e]).then((function(e){e.data.success&&t.$router.replace("/Home")})).catch((function(){t.displayErrorMessage()}))},displaySuccessfulMessage:function(){var e=document.getElementById("successMessage"),t=document.getElementById("errorMessage");this.successfulMessage(e,t)},displayErrorMessage:function(){var e=document.getElementById("errorMessage"),t=document.getElementById("successMessage");this.postError&&this.failureMessage(e,t)},successfulMessage:function(e,t){t.innerText="",e.innerHTML=this.postStatus},failureMessage:function(e,t){t.innerText="",e.innerHTML=this.postError}}),created:function(){}},u=c,l=s("2877"),p=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d2183db.961f1c12.js.map